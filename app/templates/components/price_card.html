<a href="{{ url_for('main.commodity_detail', commodity_id=commodity.id) }}" class="block group">
    <div
        class="bg-card-warm dark:bg-terminal-surface p-6 rounded-2xl shadow-sm border border-brand-black-60/20 dark:border-white/10 group-hover:shadow-lg group-hover:border-brand-oxford dark:group-hover:border-brand-teal group-hover:-translate-y-1 transition-all duration-300 h-full relative overflow-hidden">

        <!-- Subtle gradient overlay on hover -->
        <div
            class="absolute inset-0 bg-gradient-to-br from-brand-oxford/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none">
        </div>

        <!-- Category badge -->
        <div class="flex items-center justify-between mb-3">
            <div class="flex items-center gap-2">
                <span
                    class="text-[10px] font-bold text-brand-black-60 dark:text-brand-black-60 tracking-[0.15em] font-ui uppercase">{{
                    commodity.category|upper }}</span>
                <!-- D/M frequency badge -->
                {% set is_daily = commodity.source_type == 'EIA' or commodity.id in ['brent_oil', 'wti_oil',
                'natural_gas', 'heating_oil', 'jet_fuel', 'propane', 'gold', 'silver', 'gasoline'] %}
                <span
                    class="text-[9px] font-bold px-1.5 py-0.5 rounded font-ui freq-badge
                    {% if is_daily %}bg-brand-teal/20 text-brand-teal{% else %}bg-brand-oxford/20 text-brand-oxford dark:bg-brand-teal/20 dark:text-brand-teal{% endif %}"
                    title="{% if is_daily %}Daily data{% else %}Monthly data{% endif %}">
                    {% if is_daily %}D{% else %}M{% endif %}
                </span>
            </div>
            <div class="text-[10px] font-bold py-1 px-2.5 rounded-full font-ui"
                style="color: var({% if commodity.change >= 0 %}--color-up{% else %}--color-down{% endif %}); background-color: var({% if commodity.change >= 0 %}--color-up-bg{% else %}--color-down-bg{% endif %});">
                {% if commodity.change >= 0 %}+{% else %}âˆ’{% endif %} Change
            </div>
        </div>

        <!-- Commodity name -->
        <h3
            class="text-lg font-bold text-brand-black-80 dark:text-white mb-4 font-serif leading-tight group-hover:text-brand-oxford dark:group-hover:text-brand-teal transition-colors">
            {{ commodity.name }}</h3>

        <!-- Price display -->
        <div class="flex items-end justify-between gap-4 font-ui">
            <div>
                <div class="text-3xl font-extrabold text-brand-black-80 dark:text-white tracking-tight leading-none">
                    {{ commodity.price }}
                </div>
                <div class="text-sm font-medium text-brand-black-60 dark:text-brand-black-60/80 mt-1">
                    {{ commodity.currency }} / {{ commodity.unit }}
                </div>
            </div>
            <div class="text-right">
                <div class="text-xl font-bold"
                    style="color: var({% if commodity.daily_change|default(commodity.change) >= 0 %}--color-up{% else %}--color-down{% endif %});"
                    title="Observation-to-observation percentage change">
                    {% if commodity.daily_change|default(commodity.change) >= 0 %}+{% endif %}{{
                    commodity.daily_change_percent|default(commodity.change_percent) }}%
                </div>
                <div class="text-xs text-brand-black-60 dark:text-brand-black-60/60 mt-1">
                    {% if commodity.daily_change|default(commodity.change) >= 0 %}+{% endif %}{{
                    commodity.daily_change|default(commodity.change) }} {{ commodity.currency }}
                </div>
            </div>
        </div>

        <!-- Footer with date and arrow -->
        <div
            class="mt-5 pt-4 border-t border-brand-black-60/10 dark:border-white/5 flex justify-between items-center font-ui">
            <div class="text-xs text-brand-black-60 dark:text-brand-black-60/80 font-medium">
                As of {{ commodity.date }} (latest observation)
            </div>
            <div
                class="text-brand-black-60 dark:text-brand-black-60 group-hover:text-brand-oxford dark:group-hover:text-brand-teal group-hover:translate-x-1 transition-all">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                </svg>
            </div>
        </div>
    </div>
</a>